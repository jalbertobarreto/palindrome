#config.yaml
resources:
- name: palindrome-svr
  type: compute.v1.instance
  properties:
    zone: us-central1-a
    machineType: f1-micro
    networkInterfaces:
    - network: default
      accessConfigs: []
    metadata:
      items:
      - key: startup-script
        value: "docker run --rm --name palindrome -d -p 81:81 jalbertobarreto/palindrome"


- name: bastion-host
  type: compute.v1.instance
  properties:
    zone: us-central1-a
    machineType: f1-micro
    networkInterfaces:
    - network: default
      accessConfigs:
        - name: External NAT
          type: ONE_TO_ONE_NAT
    metadata:
      items:
      - key: startup-script
        value: "apt-get update && apt-get install git -y && git clone https://github.com/jalbertobarreto/palindrome.git && chmod +x palindrome/palindrome.sh"


#To deploy using config.yaml run the following:
#gcloud deployment-manager deployments create my-deployment --config config.yaml
